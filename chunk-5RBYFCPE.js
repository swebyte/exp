import{a as E,b as I,c as T}from"./chunk-YPWRSUCZ.js";import{b as O,d as k}from"./chunk-JXR4H37N.js";import"./chunk-SJQ2B3S3.js";import{e as S,i as D}from"./chunk-STM5T3Q6.js";import{g as y,t as w}from"./chunk-6RF4LEQF.js";import{Cb as b,Eb as d,Na as r,Ob as c,Pb as x,Qb as f,Zb as P,_b as B,ab as h,ba as a,ga as u,ha as _,lb as g,mb as m,oa as v,pb as C,qb as i,rb as n,sb as s,yb as M}from"./chunk-6ZM7RP27.js";function N(o,e){o&1&&(i(0,"div",5)(1,"div",7)(2,"span",8),c(3,"Loading..."),n()()())}function V(o,e){if(o&1){let t=M();i(0,"div",11)(1,"button",16),b("click",function(){u(t);let p=d(2);return _(p.openEditBlogModal())}),s(2,"i",17),n(),i(3,"button",18),b("click",function(){u(t);let p=d(2);return _(p.deleteBlogPost())}),s(4,"i",19),n()()}}function A(o,e){if(o&1&&c(0),o&2){let t=d(2);f(" By ",t.post().author," \u2022 ")}}function F(o,e){if(o&1&&(i(0,"article",6)(1,"div",9)(2,"h1",10),c(3),n(),g(4,V,5,0,"div",11),n(),i(5,"div",1)(6,"p",12),g(7,A,1,1),c(8),P(9,"date"),n(),s(10,"app-like-button",13),n(),i(11,"div",14),s(12,"markdown",15),n()()),o&2){let t=d();r(3),x(t.post().title),r(),m(t.authService.isAuthenticated()?4:-1),r(3),m(t.post().author?7:-1),r(),f(" ",B(9,7,t.post().created_at,"MMMM d, yyyy")," "),r(2),C("postId",t.post().id)("count",t.post().likes||0),r(2),C("data",t.post().body)}}var z=class o{blogService=a(E);route=a(O);router=a(k);modalService=a(D);authService=a(w);post=this.blogService.selectedPost;loading=v(!0);ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.loading.set(!0),this.blogService.loadBlogPost(Number(e)).subscribe({next:t=>{t||(console.error("Blog post not found"),this.router.navigate(["/blog/"])),this.loading.set(!1)},error:t=>{console.error("Failed to load blog post:",t),this.loading.set(!1),this.router.navigate(["/blog/"])}})):this.router.navigate(["/blog/"])}deleteBlogPost(){let e=this.post()?.id;e&&confirm("Are you sure you want to delete this post?")&&this.blogService.deleteBlogPost(e).subscribe({next:()=>{console.log("Blog post deleted"),this.router.navigate(["/blog/"])},error:t=>{console.error("Failed to delete blog post:",t)}})}openEditBlogModal(){let e=this.post();if(!e)return;let t=this.modalService.open(T,{centered:!0,size:"lg"});t.componentInstance.blogPost=e,t.result.then(l=>{console.log("Blog post updated:",l),this.blogService.loadBlogPost(e.id).subscribe()},l=>{console.log("Modal dismissed")})}goBack(){this.router.navigate(["/blog/"])}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-blog-detail"]],decls:9,vars:1,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","ps-0",3,"click"],[1,"bi","bi-arrow-left","pe-2"],[1,"blog-detail-container"],[1,"text-center"],[1,"blog-post"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"post-title"],[1,"d-flex","gap-1"],[1,"post-date","text-muted","mb-0"],[3,"postId","count"],[1,"post-body"],[3,"data"],["title","Edit post",1,"btn","btn-link","text-primary",3,"click"],[1,"bi","bi-pencil"],["title","Delete post",1,"btn","btn-link","text-danger","delete-btn",3,"click"],[1,"bi","bi-trash"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),b("click",function(){return l.goBack()}),s(4,"i",3),c(5," Back "),n()()(),i(6,"div",4),g(7,N,4,0,"div",5)(8,F,13,10,"article",6),n()()),t&2&&(r(7),m(l.loading()?7:l.post()?8:-1))},dependencies:[S,I,y],styles:[".blog-detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#212529;margin-bottom:.5rem}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:1rem}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .post-body[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.8;color:#495057;white-space:pre-wrap;word-wrap:break-word}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:.25rem .5rem;opacity:.6;transition:opacity .2s}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{opacity:1}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.blog-detail-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;margin-top:3rem}"]})};export{z as BlogDetailComponent};
