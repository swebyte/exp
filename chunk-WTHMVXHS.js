import{a as N}from"./chunk-LQ2Y5YM5.js";import{d as E}from"./chunk-UMVVNZNU.js";import"./chunk-BQOB3HVR.js";import{D,c as S,h as k,o as u,p as F}from"./chunk-5SA7GSO3.js";import{Bb as c,Lb as l,Mb as P,Na as r,Tb as B,Ub as y,Vb as w,ab as O,ba as a,ga as g,ha as d,kb as p,lb as _,mb as h,nb as x,oa as f,ob as v,pb as i,qb as o,rb as b,vb as C,zb as M}from"./chunk-PUFU6ETD.js";var $=n=>["/blog",n],z=(n,e)=>e.title;function R(n,e){if(n&1){let t=C();i(0,"button",7),M("click",function(){g(t);let m=c();return d(m.openNewBlogModal())}),b(1,"i",8),l(2," New Blog "),o()}}function A(n,e){if(n&1){let t=C();i(0,"button",15),M("click",function(){g(t);let m=c().$implicit,V=c();return d(V.deleteBlogPost(m.id))}),b(1,"i",16),o()}}function I(n,e){if(n&1&&(i(0,"article",6)(1,"div",9)(2,"div",10)(3,"h2",11),l(4),o(),i(5,"p",12),l(6),y(7,"date"),o()(),p(8,A,2,0,"button",13),o(),i(9,"a",14),l(10,"Read More \u2192"),o()()),n&2){let t=e.$implicit,s=c();r(4),P(t.title),r(2),P(w(7,4,t.created_at,"MMMM d, yyyy")),r(2),_(s.authService.isAuthenticated()?8:-1),r(),v("routerLink",B(7,$,t.id))}}var T=class n{http=a(k);modalService=a(D);authService=a(F);posts=f([]);ngOnInit(){this.loadBlogPosts()}loadBlogPosts(){this.http.get(`${u.apiBaseUrl}/blog?order=created_at.desc`).subscribe({next:e=>{this.posts.set(e)},error:e=>{console.error("Failed to load blog posts:",e)}})}deleteBlogPost(e){confirm("Are you sure you want to delete this blog post?")&&this.http.delete(`${u.apiBaseUrl}/blog?id=eq.${e}`).subscribe({next:()=>{console.log("Blog post deleted"),this.loadBlogPosts()},error:t=>{console.error("Failed to delete blog post:",t)}})}openNewBlogModal(){this.modalService.open(N,{centered:!0,size:"lg"}).result.then(t=>{console.log("Blog post created:",t),this.loadBlogPosts()},t=>{console.log("Modal dismissed")})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=O({type:n,selectors:[["app-blog"]],decls:12,vars:1,consts:[[1,"container","mt-4"],[1,"blog-container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"lead"],[1,"btn","btn-primary"],[1,"posts-list","mt-4"],[1,"post-item"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","pe-1"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"post-title"],[1,"post-date"],["title","Delete post",1,"btn","btn-link","text-danger","delete-btn"],[1,"read-more",3,"routerLink"],["title","Delete post",1,"btn","btn-link","text-danger","delete-btn",3,"click"],[1,"bi","bi-trash"]],template:function(t,s){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1"),l(5,"Blog"),o(),i(6,"p",3),l(7,"Read my the latest articles."),o()(),p(8,R,3,0,"button",4),o(),i(9,"div",5),h(10,I,11,9,"article",6,z),o()()()),t&2&&(r(8),_(s.authService.isAuthenticated()?8:-1),r(2),x(s.posts()))},dependencies:[E,S],styles:[".blog-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1rem}.blog-container[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:2rem}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]{padding:2rem 0;border-bottom:1px solid #e0e0e0}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:1.1rem;opacity:.6;transition:opacity .2s}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{opacity:1}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin-bottom:.5rem;color:#212529}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;margin-bottom:1rem}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .post-body[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#495057;margin-bottom:1rem}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-weight:500;transition:color .2s}.blog-container[_ngcontent-%COMP%]   .posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]:hover{color:#0056b3}"]})};export{T as BlogComponent};
