import{a as I}from"./chunk-LQ2Y5YM5.js";import{a as k,c as D}from"./chunk-UMVVNZNU.js";import"./chunk-BQOB3HVR.js";import{D as T,c as y,h as w,o as f,p as S,q as E}from"./chunk-5SA7GSO3.js";import{Bb as p,Lb as d,Mb as P,Na as a,Nb as B,Ub as x,Vb as O,ab as h,ba as r,ga as m,ha as b,kb as _,lb as C,oa as u,ob as v,pb as i,qb as o,rb as s,vb as M,zb as g}from"./chunk-PUFU6ETD.js";function z(n,e){n&1&&(i(0,"div",5)(1,"div",7)(2,"span",8),d(3,"Loading..."),o()()())}function V(n,e){if(n&1){let t=M();i(0,"div",12)(1,"button",15),g("click",function(){m(t);let c=p(2);return b(c.openEditBlogModal())}),s(2,"i",16),o(),i(3,"button",17),g("click",function(){m(t);let c=p(2);return b(c.deleteBlogPost())}),s(4,"i",18),o()()}}function A(n,e){if(n&1&&(i(0,"article",6)(1,"div",9)(2,"div")(3,"h1",10),d(4),o(),i(5,"p",11),d(6),x(7,"date"),o()(),_(8,V,5,0,"div",12),o(),i(9,"div",13),s(10,"markdown",14),o()()),n&2){let t=p();a(4),P(t.post().title),a(2),B(" ",O(7,4,t.post().created_at,"MMMM d, yyyy")," "),a(2),C(t.authService.isAuthenticated()?8:-1),a(2),v("data",t.post().body)}}var N=class n{http=r(w);route=r(k);router=r(D);modalService=r(T);authService=r(S);post=u(null);loading=u(!0);ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadBlogPost(Number(e)):this.router.navigate(["/blog/"])}loadBlogPost(e){this.loading.set(!0),this.http.get(`${f.apiBaseUrl}/blog?id=eq.${e}`).subscribe({next:t=>{t.length>0?this.post.set(t[0]):(console.error("Blog post not found"),this.router.navigate(["/blog/"])),this.loading.set(!1)},error:t=>{console.error("Failed to load blog post:",t),this.loading.set(!1),this.router.navigate(["/blog/"])}})}deleteBlogPost(){let e=this.post()?.id;e&&confirm("Are you sure you want to delete this post?")&&this.http.delete(`${f.apiBaseUrl}/blog?id=eq.${e}`).subscribe({next:()=>{console.log("Blog post deleted"),this.router.navigate(["/blog/"])},error:t=>{console.error("Failed to delete blog post:",t)}})}openEditBlogModal(){let e=this.post();if(!e)return;let t=this.modalService.open(I,{centered:!0,size:"lg"});t.componentInstance.blogPost=e,t.result.then(l=>{console.log("Blog post updated:",l),this.loadBlogPost(e.id)},l=>{console.log("Modal dismissed")})}goBack(){this.router.navigate(["/blog/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=h({type:n,selectors:[["app-blog-detail"]],decls:9,vars:1,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-link","ps-0",3,"click"],[1,"bi","bi-arrow-left"],[1,"blog-detail-container"],[1,"text-center"],[1,"blog-post"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"post-title"],[1,"post-date","text-muted"],[1,"d-flex","gap-1"],[1,"post-body"],[3,"data"],["title","Edit post",1,"btn","btn-link","text-primary",3,"click"],[1,"bi","bi-pencil"],["title","Delete post",1,"btn","btn-link","text-danger","delete-btn",3,"click"],[1,"bi","bi-trash"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"button",2),g("click",function(){return l.goBack()}),s(4,"i",3),d(5," Back "),o()()(),i(6,"div",4),_(7,z,4,0,"div",5)(8,A,11,7,"article",6),o()()),t&2&&(a(7),C(l.loading()?7:l.post()?8:-1))},dependencies:[E,y],styles:[".blog-detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#212529;margin-bottom:.5rem}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:2rem}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .post-body[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.8;color:#495057;white-space:pre-wrap;word-wrap:break-word}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{padding:.25rem .5rem;opacity:.6;transition:opacity .2s}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{opacity:1}.blog-detail-container[_ngcontent-%COMP%]   .blog-post[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.blog-detail-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;margin-top:3rem}"]})};export{N as BlogDetailComponent};
